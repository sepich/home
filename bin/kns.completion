_kns() {
    local res
    if [ $COMP_CWORD -eq 1 ]; then
        res='off -n '`find ~/.kube -maxdepth 1 -type f ! -name config | awk -F/ '{print $NF}' | sort`
    elif [ $COMP_CWORD -eq 2 ]; then
        res=`kubectl get namespaces -o=jsonpath='{range .items[*].metadata.name}{@}{"\n"}{end}'`
    fi
    [ "$res" ] && COMPREPLY=(`compgen -W "$res" -- ${COMP_WORDS[COMP_CWORD]}`)
}
complete -F _kns kns